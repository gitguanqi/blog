(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{482:function(t,a,s){"use strict";s.r(a);var n=s(10),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("导语：作为一个以服务器为主要市场的操作系统，主要就是对客户端的请求进行响应，进行处理的。在经历过系统镜像安装和本地配置好ssh功能后，接下来进行服务器的安装，这里我以nginx为主，介绍一下如何安装nginx和配置站点，")])]),t._v(" "),s("h2",{attrs:{id:"安装要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装要求"}},[t._v("#")]),t._v(" 安装要求")]),t._v(" "),s("ul",[s("li",[t._v("linux centos7系统")]),t._v(" "),s("li",[t._v("ssh软件")])]),t._v(" "),s("h2",{attrs:{id:"nginx简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx简介"}},[t._v("#")]),t._v(" nginx简介")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://nginx.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx官网"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("nginx作者是伊戈尔·赛索耶夫，最初是为一个俄罗斯访问量第二大的网站开发的服务器。")]),t._v(" "),s("p",[t._v("nginx主要是有以下几个功能：")]),t._v(" "),s("ul",[s("li",[t._v("免费开源的服务器")]),t._v(" "),s("li",[t._v("轻量级的服务器，安装包只有几百KB")]),t._v(" "),s("li",[t._v("高性能的web服务器")]),t._v(" "),s("li",[t._v("反向代理服务器")]),t._v(" "),s("li",[t._v("负载均衡")]),t._v(" "),s("li",[t._v("电子邮件代理服务器")])]),t._v(" "),s("p",[t._v("nginx国内大陆的网站用户有腾讯、百度、淘宝、网易、京东和新浪等。")]),t._v(" "),s("h2",{attrs:{id:"nginx安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx安装"}},[t._v("#")]),t._v(" nginx安装")]),t._v(" "),s("h3",{attrs:{id:"编译安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译安装"}},[t._v("#")]),t._v(" 编译安装")]),t._v(" "),s("h4",{attrs:{id:"下载安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[t._v("#")]),t._v(" 下载安装")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://nginx.org/download/nginx-1.16.1.tar.gz\nyum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf nginx-1.16.1.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" nginx-1.16.1\n./configure --prefix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /usr/local/nginx/sbin/nginx /usr/local/bin/nginx\n")])])]),s("h4",{attrs:{id:"操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作"}},[t._v("#")]),t._v(" 操作")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# start")]),t._v("\nnginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stop")]),t._v("\nnginx -s quit\nnginx -s stop\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# look process")]),t._v("\nnginx -s quit\n")])])]),s("h4",{attrs:{id:"配置服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置服务"}},[t._v("#")]),t._v(" 配置服务")]),t._v(" "),s("p",[s("code",[t._v("vi /etc/systemd/system/nginx.service")])]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[Unit]\nDescription=nginx\nAfter=syslog.target network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=oneshot\nExecStart=/usr/local/nginx/sbin/nginx\nExecStop=/usr/local/nginx/sbin/nginx -s stop \nExecReload=/bin/kill -s HUP $MAINPID\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n")])])]),s("h4",{attrs:{id:"启动命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动命令"}},[t._v("#")]),t._v(" 启动命令")]),t._v(" "),s("ul",[s("li",[t._v("启动 "),s("code",[t._v("systemctl start nginx")])]),t._v(" "),s("li",[t._v("停止 "),s("code",[t._v("systemctl stop nginx")])]),t._v(" "),s("li",[t._v("状态 "),s("code",[t._v("systemctl status nginx")])]),t._v(" "),s("li",[t._v("打开开机自启 "),s("code",[t._v("systemctl enable nginx")])]),t._v(" "),s("li",[t._v("关闭开机自启 "),s("code",[t._v("systemctl disable nginx")])])]),t._v(" "),s("h3",{attrs:{id:"安装包安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装包安装"}},[t._v("#")]),t._v(" 安装包安装")]),t._v(" "),s("ul",[s("li",[t._v("添加安装包")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n")])])]),s("ul",[s("li",[t._v("安装软件包")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y nginx\n")])])]),s("h2",{attrs:{id:"nginx程序启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx程序启动"}},[t._v("#")]),t._v(" nginx程序启动")]),t._v(" "),s("p",[t._v("你可以执行"),s("code",[t._v("nginx -v")]),t._v("查看版本。")]),t._v(" "),s("p",[t._v("系统启动并且设置为开机自启动。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("systemctl start nginx\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" nginx\n")])])]),s("p",[t._v("由于nginx默认是80端口，所以你需要开放80端口。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("firewall-cmd --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp --permanent\nfirewall-cmd --reload\n")])])]),s("h2",{attrs:{id:"增加hosts记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#增加hosts记录"}},[t._v("#")]),t._v(" 增加hosts记录")]),t._v(" "),s("p",[t._v("打开系统hosts文件,这里就以"),s("code",[t._v("www.example.com")]),t._v("为例。")]),t._v(" "),s("p",[t._v("如果你不清楚自己的系统ip是多少，可以运行下面这个命令安装服务包。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y net-tools\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v("\n")])])]),s("p",[t._v("就会看到自己的ip地址了。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("首先我们进入hosts文件，"),s("code",[t._v("vi /etc/hosts")])])]),t._v(" "),s("li",[s("p",[t._v("然后按一下键盘上的Insert， 输入内容 "),s("code",[t._v("127.0.0.1 www.example.com")]),t._v(";")])]),t._v(" "),s("li",[s("p",[t._v("最后按住键盘上的"),s("code",[t._v("Esc")]),t._v("，输入"),s("code",[t._v(":wq")]),t._v("或者"),s("code",[t._v(":x")]),t._v("保存并且退出。")])])]),t._v(" "),s("p",[t._v("到游览器地址栏输入刚刚保存的网址，就可以看到一下内容。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/nginx.jpg",alt:"nginx"}})]),t._v(" "),s("h2",{attrs:{id:"配置一个站点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置一个站点"}},[t._v("#")]),t._v(" 配置一个站点")]),t._v(" "),s("p",[t._v("nginx的全局配置文件"),s("code",[t._v("vi /etc/nginx/nginx.conf")])]),t._v(" "),s("p",[t._v("接下来我会配置一个简单的静态站点作为示例。")]),t._v(" "),s("ul",[s("li",[t._v("创建一个文件夹用来存放站点文件。")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /var/www/sites\n")])])]),s("ul",[s("li",[t._v("新建一个网页")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /var/www/sites/index.html\n")])])]),s("ul",[s("li",[t._v("然后依照上面的文件编辑保存步骤输入内容并且保存。")])]),t._v(" "),s("p",[t._v("这是我的网站首页内容。")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),s("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("示例站点"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello,World!"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Welcome to visted my web site!"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("添加配置文件夹和文件")])]),t._v(" "),s("p",[t._v("进入nginx的目录下，创建一个文件夹和文件。")]),t._v(" "),s("p",[t._v("进入"),s("code",[t._v("nginx.conf")]),t._v("文件，在http属性下面加一个"),s("code",[t._v("include /etc/nginx/vhost/*.conf;")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /etc/nginx/vhost\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/nginx/vhost/example.com.conf\n")])])]),s("p",[t._v("输入以下内容并且保存。")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n  listen        80; # 监听的端口，这里是80端口\n  server_name   www.example.com example.com; # 这里是地址栏要访问的域名，可以写多个\n  access_log /var/www/sites/access.log; # 访问成功日志文件\n  error_log /var/www/sites/error.log; # 访问错误日志文件\n  location / {\n    root /var/www/sites; # 站点目录\n    index index.html index.htm; # 站点首页文件名称\n  }\n  error_page   500 502 503 504  /50x.html; #错误页面\n  location = /50x.html {\n      root   /usr/share/nginx/html;\n  }\n}\n")])])]),s("ul",[s("li",[t._v("配置完了以后重载重启nginx。")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("systemctl reload nginx\nsystemctl restart nginx\n")])])]),s("p",[t._v("【技巧】这里有一个小技巧，可以检测你写的nginx配置站点文件语法是否正确，可以帮助你减少不必要的烦恼。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查全部配置文件")]),t._v("\nnginx -t\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查单个配置文件")]),t._v("\nnginx -t -c /etc/nginx/nginx.conf\n")])])]),s("p",[t._v("如果结果没有报错，说明是你写的语法没有问题，反之则要根据错误提示，找到对应的配置文件，更改内容。\n在本地hosts文件增加解析记录,这里的ip就是你远程服务器的ip地址了。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.123 www.example.com\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.123 example.com\n")])])]),s("ul",[s("li",[t._v("预览")])]),t._v(" "),s("p",[t._v("打开游览器，输入"),s("code",[t._v("www.example.com")]),t._v("或者"),s("code",[t._v("example.com")]),t._v("就可以看到之前编辑的站点首页内容了。")]),t._v(" "),s("h2",{attrs:{id:"优化技巧"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化技巧"}},[t._v("#")]),t._v(" 优化技巧")]),t._v(" "),s("h3",{attrs:{id:"隐藏版本号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#隐藏版本号"}},[t._v("#")]),t._v(" 隐藏版本号")]),t._v(" "),s("p",[t._v("http,server,location都可以加")]),t._v(" "),s("p",[s("code",[t._v("vi /etc/nginx/ngninx.conf")])]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server_tokens off;\n")])])]),s("h3",{attrs:{id:"配置多个域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置多个域名"}},[t._v("#")]),t._v(" 配置多个域名")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n    listen 80;\n    server_name app.dev a.dev b.dev;\n}\n")])])]),s("h3",{attrs:{id:"配置多个站点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置多个站点"}},[t._v("#")]),t._v(" 配置多个站点")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n    listen 80;\n    server_name a.app.dev;\n    location / {\n      root /usr/local/app;\n      index index.html index.htm;\n    }\n}\n\nserver {\n    listen 80;\n    server_name b.app.dev;\n    location / {\n      root /usr/local/b;\n      index index.html index.htm;\n    }\n}\n\nserver {\n    listen 80;\n    server_name c.app.dev;\n    location / {\n      root /usr/local/c;\n      index index.html index.htm;\n    }\n}\n")])])]),s("h3",{attrs:{id:"禁用ip访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁用ip访问"}},[t._v("#")]),t._v(" 禁用ip访问")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n    listen       80 default;\n    server_name  _;\n    return  404;\n}\n")])])]),s("p",[t._v("或者")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n    listen 80 default;\n    server_name  _;\n    rewrite ^/(.*)$ https://blog.dev/$1 permanent;\n}\n")])])]),s("h3",{attrs:{id:"返回验证文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回验证文件"}},[t._v("#")]),t._v(" 返回验证文件")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("location = /deijdw12919msjd.txt {\n    default_type text/plain;\n    return 200 'abd12535355abde35352';\n}\n")])])]),s("h3",{attrs:{id:"配置反向代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置反向代理"}},[t._v("#")]),t._v(" 配置反向代理")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("upstream testSite {\n  server 192.168.0.1 weight=1;\n  server 192.168.0.2 weight=1;\n}\n\nserver {\n    location /blog/ { \n        proxy_pass http://testSite; \n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n")])])]),s("h3",{attrs:{id:"开启keepalive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启keepalive"}},[t._v("#")]),t._v(" 开启keepalive")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("upstream tomcat {\n    server a.dev:8080;\n    keepalive 1024;\n}\n")])])]),s("h3",{attrs:{id:"自动跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动跳转"}},[t._v("#")]),t._v(" 自动跳转")]),t._v(" "),s("div",{staticClass:"language-config extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("location / {\n    error_page 404 =  @404page;\n}\n\nlocation @404page {\n    rewrite  .*  / permanent;\n}\n")])])]),s("h2",{attrs:{id:"写在最后"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写在最后"}},[t._v("#")]),t._v(" 写在最后")]),t._v(" "),s("p",[t._v("今天只是初步探究nginx的用法，其他的功能下次补充完善。")])])}),[],!1,null,null,null);a.default=e.exports}}]);