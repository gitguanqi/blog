(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{574:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("最近在头疼vue项目打包的问题，看着辛辛苦苦写的项目写完后，打包到线上的用户体验很糟糕，实在是无地自容。后面接触了一些打包优化的方法，现在做一个开发总结，这个技术栈就是"),a("strong",[t._v("vue+element-ui+axios+echarts")]),t._v(",使用webpack打包构建工具，算是一个经验笔记只谈，文章若有不足之处，还请各位大侠指点一二，我会尽快改正，谢谢!")])]),t._v(" "),a("h2",{attrs:{id:"目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[t._v("#")]),t._v(" 目录")]),t._v(" "),a("ul",[a("li",[t._v("路由异步加载")]),t._v(" "),a("li",[t._v("element组件优化")]),t._v(" "),a("li",[t._v("webpack配置优化")]),t._v(" "),a("li",[t._v("项目依赖包统计分析")]),t._v(" "),a("li",[t._v("优化效果")])]),t._v(" "),a("h2",{attrs:{id:"路由异步加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由异步加载"}},[t._v("#")]),t._v(" 路由异步加载")]),t._v(" "),a("p",[t._v("Vue项目的页面是使用的虚拟路由，页面内容是靠vue-router配置的路由链接来访问的，SPA单页面应用开发，适合开发后台系统，但是对搜索引擎不友好，因为最后只生成一个页面。")]),t._v(" "),a("p",[t._v("搜索引擎是靠页面的链接来爬取网页内容，然后搜录进去搜索引擎数据库的，而vue打包以后的项目只有一个页面，所以其中的内容搜索引擎蜘蛛当然无法收录，这是一个比较不好的地方，当然后期可以进行SEO优化。")]),t._v(" "),a("p",[t._v("所以当你的项目vue组件很多时候，打包以后的首屏渲染优化就是一个非常重要的问题，改善性能，提高加载打开速度，是很关键的一点。")]),t._v(" "),a("p",[t._v("下面，我就vue中的路由异步懒加载做一个方法分享,建议如果组件不是很多的项目不要使用这种方法，会增加加载时间和速度，对于组件很多的项目可以采用这种方法。")]),t._v(" "),a("h3",{attrs:{id:"默认es6引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认es6引入"}},[t._v("#")]),t._v(" 默认es6引入")]),t._v(" "),a("p",[t._v("但是这种方法组件多了，加载就会变慢，打包以后的"),a("code",[t._v("app.js")]),t._v("文件体积会变得非常大，后面使用比较常用的两种。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" example "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../components/example.vue'")]),t._v("\n")])])]),a("h3",{attrs:{id:"vue官方推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue官方推荐"}},[t._v("#")]),t._v(" vue官方推荐")]),t._v(" "),a("p",[t._v("使用import把组件分割成一个个小的单独的文件，缩小文件体积。webpackChunkName里面的就是这个组件/子组件的打包后的名字。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("example")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "group-example" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../components/example.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"require方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require方法"}},[t._v("#")]),t._v(" require方法")]),t._v(" "),a("p",[t._v("下面就是我比较喜欢的require方法，这个也是可以把组件分割成小的块。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("example")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../components/example.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"element组件优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#element组件优化"}},[t._v("#")]),t._v(" element组件优化")]),t._v(" "),a("p",[t._v("由于是后台项目，所以选择element-ui框架进行后台系统搭建，所以对这个进行优化也可以减小体积，提高速度和减少加载时间，提高用户体验。")]),t._v(" "),a("p",[t._v("对这个框架的优化可以使用第三种方法，但是我还是比较喜欢这种方法，就是对组件不用全局引入，还是改成按需加载的比较好。")]),t._v(" "),a("h3",{attrs:{id:"全局使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局使用"}},[t._v("#")]),t._v(" 全局使用")]),t._v(" "),a("ul",[a("li",[t._v("全局引入和使用")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" elementUI "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elementUI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("这种方法对于只用少量element-ui组件的情况来说，很多组件都是多余的，会无形中加大加载时间和项目打包后的体积，所以使用下面这种按需引入的方法可以有效解决这个问题。")]),t._v(" "),a("p",[t._v("下面是演示代码：一般是表单和表格用的较多。")]),t._v(" "),a("h3",{attrs:{id:"按需引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#按需引入"}},[t._v("#")]),t._v(" 按需引入")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Form"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需使用")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Form"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("还要一些加载和消息提示等的组件，以下写法：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  MessageBox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Notification"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需使用")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 挂载到vue实例上面")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$loading "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Loading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$msgbox "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MessageBox\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$confirm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MessageBox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("confirm\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$alert "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MessageBox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alert\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$prompt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MessageBox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompt\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Message\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$notify "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Notification"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("使用通知组件可以，这么调用也可以，"),a("code",[t._v("Notification(options)")]),t._v(",或者"),a("code",[t._v("Notification.success(options)")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"webpack配置优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置优化"}},[t._v("#")]),t._v(" webpack配置优化")]),t._v(" "),a("h3",{attrs:{id:"依赖包体积优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖包体积优化"}},[t._v("#")]),t._v(" 依赖包体积优化")]),t._v(" "),a("p",[t._v("众所周知，日常开发过程中，前端这块早就已经开始进行工程化和组件化开发了，所以免不了下载各种node包，使得打包后的体积也是非常的庞大，下面使用webpack的一个配置外部扩展就可以解决这类问题。")]),t._v(" "),a("h4",{attrs:{id:"externals配置练习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#externals配置练习"}},[t._v("#")]),t._v(" externals配置练习")]),t._v(" "),a("p",[t._v("webpack官方文档是有一个配置用来处理各种依赖包打包优化的，这是"),a("a",{attrs:{href:"https://www.webpackjs.com/configuration/externals/",target:"_blank",rel:"noopener noreferrer"}},[t._v("【externals外部扩展】"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("使用方法：这个案例以jQuery为主。")]),t._v(" "),a("ul",[a("li",[t._v("引入cdn,在"),a("code",[t._v("index.html")]),t._v("的"),a("code",[t._v("head")]),t._v("标签中写入。")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://code.jquery.com/jquery-3.1.0.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("integrity")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("anonymous"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("修改webpack配置文件"),a("code",[t._v("webpack.config.js")])])]),t._v(" "),a("p",[t._v("属性就是你在项目中引入的名称，后面的值就是jQuery的暴露出的方法名称。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("externals"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  jquery"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jQuery'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("最后使用")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" $ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jquery'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.my-elem'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("animate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*some things*/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("这样三步以后，打包后的文件体积会缩小很多，一个不是很明显，但是很多个包使用这种方法，效果就比较显著了。")]),t._v(" "),a("h4",{attrs:{id:"externals配置实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#externals配置实战"}},[t._v("#")]),t._v(" externals配置实战")]),t._v(" "),a("ul",[a("li",[t._v("在"),a("code",[t._v("index.html")]),t._v("中引入cdn，以下是几个常见的cdn服务商。\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://www.bootcdn.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootcdn"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://staticfile.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("七牛云"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://jscdn.upai.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("又拍云"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://unpkg.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("unpkg"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.jsdelivr.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsdelivr"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://cdnjs.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cdnjs"),a("OutboundLink")],1)])])])]),t._v(" "),a("p",[t._v("这里使用国内的bootcdn服务，版本的话你自己项目使用的哪个就引入哪个。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcss.com/vue/2.6.10/vue.min.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcss.com/vue-router/3.0.7/vue-router.min.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcss.com/vuex/3.1.1/vuex.min.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcss.com/axios/0.19.0/axios.min.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcss.com/element-ui/2.10.1/index.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("ul",[a("li",[t._v("在webpack配置文件"),a("code",[t._v("webpack.base.conf.js")]),t._v("中"),a("em",[t._v("entry")]),t._v("属性后面加下面一段：")])]),t._v(" "),a("p",[t._v("同样的，属性是包暴露出的方法名称，后面的值是你在项目中使用的名称。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("externals"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'VueRouter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Vuex'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'elementUI'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("实战过后，发现上面的配置方法有写问题，所以调换了个，就一切🆗了。")]),t._v(" "),a("h3",{attrs:{id:"gzip压缩和sourcemap优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip压缩和sourcemap优化"}},[t._v("#")]),t._v(" Gzip压缩和sourceMap优化")]),t._v(" "),a("p",[t._v("这个也是压缩文件的一个方法，线上服务器的nginx也开启gzip功能更好；取消资源地图，可以有效保护源码。")]),t._v(" "),a("p",[t._v("在webpack的build文件中，开启Gzip压缩功能和禁用资源地图。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  build"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    productionSourceMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    productionGzip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这样做的话，打包以后就不会再有sourceMap文件了，也会多了几个以"),a("code",[t._v(".js.gz")]),t._v("后缀名的文件。")]),t._v(" "),a("h2",{attrs:{id:"项目依赖包统计分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目依赖包统计分析"}},[t._v("#")]),t._v(" 项目依赖包统计分析")]),t._v(" "),a("p",[t._v("最后，介绍一点日常开发过程中用到的依赖包分析包，开启以后可以可视化的观察每个包的体积，帮助你整理分析每个包的结构。")]),t._v(" "),a("h3",{attrs:{id:"webpack配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置"}},[t._v("#")]),t._v(" webpack配置")]),t._v(" "),a("ul",[a("li",[t._v("下载依赖包")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/robertknight/webpack-bundle-size-analyzer",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-bundle-size-analyzer"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D webpack-bundle-size-analyzer\n")])])]),a("ul",[a("li",[t._v("引入配置")])]),t._v(" "),a("p",[t._v("引入方法两种")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// commondjs方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" WebpackBundleSizeAnalyzerPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-bundle-size-analyzer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebpackBundleSizeAnalyzerPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// es6方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" WebpackBundleSizeAnalyzerPlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-bundle-size-analyzer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在webpack的配置文件中插件部分加入：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebpackBundleSizeAnalyzerPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./reports/plain-report.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("使用上面配置会生成以下内容：")]),t._v(" "),a("p",[a("code",[t._v("<webpack-output-path>/reports/plain-report.txt")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-txt extra-class"},[a("pre",{pre:!0,attrs:{class:"language-txt"}},[a("code",[t._v("marked: 27.53 KB (14.9%)\nlru-cache: 6.29 KB (3.40%)\nstyle-loader: 717 B (0.379%)\n<self>: 150.33 KB (81.3%)\n")])])]),a("h3",{attrs:{id:"vue-cli脚手架配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli脚手架配置"}},[t._v("#")]),t._v(" vue-cli脚手架配置")]),t._v(" "),a("p",[t._v("由于vue-cli已经集成了这个插件，所以使用方法就是下载插件，最后执行命令"),a("code",[t._v("npm run build --report")]),t._v("就可以打包后查看了，会自动在"),a("code",[t._v("http://localhost:8888")]),t._v("打开。")]),t._v(" "),a("h2",{attrs:{id:"优化效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化效果"}},[t._v("#")]),t._v(" 优化效果")]),t._v(" "),a("p",[t._v("最后看一下优化后的效果：")]),t._v(" "),a("h3",{attrs:{id:"打包时间对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包时间对比"}},[t._v("#")]),t._v(" 打包时间对比")]),t._v(" "),a("p",[t._v("打包前：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff6206ed0a1?w=150&h=30&f=png&s=783",alt:"时间"}})]),t._v(" "),a("p",[t._v("打包后：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff6219ecd39?w=101&h=31&f=png&s=869",alt:"时间"}})]),t._v(" "),a("h3",{attrs:{id:"打包体积对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包体积对比"}},[t._v("#")]),t._v(" 打包体积对比")]),t._v(" "),a("p",[t._v("打包前：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff6227299af?w=98&h=20&f=png&s=830",alt:"体积"}})]),t._v(" "),a("p",[t._v("打包后：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff622f15b6f?w=109&h=25&f=png&s=827",alt:"体积"}})]),t._v(" "),a("h3",{attrs:{id:"网页打开速度对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网页打开速度对比"}},[t._v("#")]),t._v(" 网页打开速度对比")]),t._v(" "),a("p",[t._v("打包前：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff6268f5cea?w=1643&h=29&f=png&s=5400",alt:"速度"}})]),t._v(" "),a("p",[t._v("打包后：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff62708c020?w=1579&h=25&f=png&s=5185",alt:"速度"}})]),t._v(" "),a("h3",{attrs:{id:"依赖包分析图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖包分析图"}},[t._v("#")]),t._v(" 依赖包分析图")]),t._v(" "),a("p",[t._v("打包前：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff642f1acf3?w=1896&h=915&f=png&s=366222",alt:"分析"}})]),t._v(" "),a("p",[t._v("打包后：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/22/16c18ff64595f1c8?w=1605&h=927&f=png&s=323648",alt:"分析"}})]),t._v(" "),a("h2",{attrs:{id:"写在最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写在最后"}},[t._v("#")]),t._v(" 写在最后")]),t._v(" "),a("p",[t._v("这次说的vue项目总结方法，只是优化方法中的几种，随着业务场景的变化，还会衍生出其他问题，要相信还有其他方法没有发现和使用，项目优化任重道远，还要很长的路要走下去，我会一直默默的优化下去的。")])])}),[],!1,null,null,null);s.default=n.exports}}]);